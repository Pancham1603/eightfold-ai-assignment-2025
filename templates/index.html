<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Eightfold AI - Company Research Assistant</title>
    <link rel="stylesheet" href="{{ url_for('static', filename='css/style.css') }}">
    <script src="https://cdn.socket.io/4.5.4/socket.io.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/chart.js@4.4.0/dist/chart.umd.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/marked/marked.min.js"></script>
</head>
<body>
    <div class="container">
        <aside class="sidebar">
            <div class="chat-header">
                <h3>Chat Assistant</h3>
                <button class="btn-new-session" id="newSessionBtn" title="Start New Session">
                    <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                        <path d="M21 2v6h-6M3 12a9 9 0 0 1 15-6.7L21 8M3 22v-6h6M21 12a9 9 0 0 1-15 6.7L3 16"></path>
                    </svg>
                    New Session
                </button>
            </div>
            
            <div class="chat-messages" id="chatMessages"></div>
            
            <div class="chat-input-container">
                <button class="attach-btn" title="Attach file">
                    <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor">
                        <path d="M21.44 11.05l-9.19 9.19a6 6 0 0 1-8.49-8.49l9.19-9.19a4 4 0 0 1 5.66 5.66l-9.2 9.19a2 2 0 0 1-2.83-2.83l8.49-8.48"/>
                    </svg>
                </button>
                <input 
                    type="text" 
                    id="companyInput" 
                    placeholder="Enter company name or ask a question..."
                    autocomplete="off"
                />
                <button class="send-btn" id="sendBtn">
                    <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor">
                        <line x1="22" y1="2" x2="11" y2="13"></line>
                        <polygon points="22 2 15 22 11 13 2 9 22 2"></polygon>
                    </svg>
                </button>
            </div>
        </aside>

        <header class="main-header">
            <div class="logo">
                <h1>Account Plan Generator</h1>
                <p>Comprehensive Sales Intelligence Analysis</p>
            </div>
            <div class="header-actions">
                <button class="btn-primary" id="newResearchBtn">New Research</button>
            </div>
        </header>

        <main class="main-content">

            <!-- Progress Screen -->
            <div class="progress-screen" id="progressScreen" style="display: none;">
                <div class="progress-content">
                    <div class="progress-header-section">
                        <h2 id="progressCompanyName">Researching Company...</h2>
                        <p class="progress-subtitle"></p>
                    </div>
                    
                    <div class="progress-stages">
                        <div class="stage-item" id="stage-prompt" data-status="pending">
                            <div class="stage-details">
                                <div class="stage-name">Processing Request</div>
                                <div class="stage-description">Analyzing prompt and extracting information</div>
                            </div>
                            <div class="stage-status">‚è≥</div>
                        </div>
                        
                        <div class="stage-item" id="stage-data" data-status="pending">
                            <div class="stage-details">
                                <div class="stage-name">Gathering Data</div>
                                <div class="stage-description">Searching web and scraping company website</div>
                            </div>
                            <div class="stage-status">‚è≥</div>
                        </div>
                        
                        <div class="stage-item" id="stage-agents" data-status="pending">
                            <div class="stage-details">
                                <div class="stage-name">Running Agents</div>
                                <div class="stage-description">8 agents analyzing in parallel</div>
                            </div>
                            <div class="stage-status">‚è≥</div>
                        </div>
                        
                        <div class="stage-item" id="stage-finalizing" data-status="pending">
                            <div class="stage-details">
                                <div class="stage-name">Finalizing</div>
                                <div class="stage-description">Generating dashboard and reports</div>
                            </div>
                            <div class="stage-status">‚è≥</div>
                        </div>
                    </div>
                    
                    <div class="current-activity">
                        <div class="activity-indicator">
                            <div class="spinner"></div>
                            <span id="currentActivity">Initializing...</span>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Welcome Screen -->
            <div class="welcome-screen" id="welcomeScreen">
                <div class="welcome-content">
                    <h2>Welcome to Eightfold AI Research Assistant</h2>
                    <p>Enter a company name to generate a comprehensive account plan with:</p>
                    <div class="features-grid">
                        <div class="feature-card">
                            <h3>Company Overview</h3>
                            <p>Business model and value opportunities</p>
                        </div>
                        <div class="feature-card">
                            <h3>Product Fit</h3>
                            <p>How Eightfold aligns with their goals</p>
                        </div>
                        <div class="feature-card">
                            <h3>Strategic Goals</h3>
                            <p>Long-term objectives analysis</p>
                        </div>
                        <div class="feature-card">
                            <h3>Stakeholders</h3>
                            <p>Key decision-makers mapping</p>
                        </div>
                        <div class="feature-card">
                            <h3>Synergies</h3>
                            <p>Partnership opportunities</p>
                        </div>
                        <!-- <div class="feature-card">
                            <span class="feature-icon">üí∞</span>
                            <h3>Pricing</h3>
                            <p>Recommended tiers and packages</p>
                        </div>
                        <div class="feature-card">
                            <span class="feature-icon">üìà</span>
                            <h3>ROI Forecast</h3>
                            <p>6-month, 1-year, 3-year projections</p>
                        </div> -->
                    </div>
                </div>
            </div>

            <div class="dashboard" id="dashboard" style="display: none;">
                <!-- Additional Data Response (shown when user requested specific analysis) -->
                <div class="card full-width additional-data-card" id="additionalDataCard" style="display: none;">
                    <div class="card-header highlight">
                        <svg class="card-icon" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor">
                            <circle cx="12" cy="12" r="10"></circle>
                            <path d="M9.09 9a3 3 0 0 1 5.83 1c0 2-3 3-3 3"></path>
                            <line x1="12" y1="17" x2="12.01" y2="17"></line>
                        </svg>
                        <h3>Requested Analysis</h3>
                    </div>
                    <div class="card-content" id="additionalDataContent">
                        <p class="loading">Loading...</p>
                    </div>
                </div>
                
                <div class="dashboard-grid">
                    <div class="card full-width">
                        <div class="card-header">
                            <svg class="card-icon" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor">
                                <rect x="3" y="3" width="18" height="18" rx="2" ry="2"></rect>
                                <line x1="9" y1="3" x2="9" y2="21"></line>
                            </svg>
                            <h3>Company Overview</h3>
                        </div>
                        <div class="card-content" id="overviewContent">
                            <p class="loading">Loading...</p>
                        </div>
                    </div>

                    <div class="card">
                        <div class="card-header">
                            <svg class="card-icon" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor">
                                <path d="M22 11.08V12a10 10 0 1 1-5.93-9.14"></path>
                                <polyline points="22 4 12 14.01 9 11.01"></polyline>
                            </svg>
                            <h3>Value Proposition Alignment</h3>
                        </div>
                        <div class="card-content" id="valueContent">
                            <p class="loading">Loading...</p>
                        </div>
                    </div>

                    <div class="card">
                        <div class="card-header">
                            <svg class="card-icon" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor">
                                <line x1="12" y1="1" x2="12" y2="23"></line>
                                <path d="M17 5H9.5a3.5 3.5 0 0 0 0 7h5a3.5 3.5 0 0 1 0 7H6"></path>
                            </svg>
                            <h3>Long-term Goals</h3>
                        </div>
                        <div class="card-content" id="goalsContent">
                            <p class="loading">Loading...</p>
                        </div>
                    </div>

                    <div class="card">
                        <div class="card-header">
                            <svg class="card-icon" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor">
                                <path d="M4 15s1-1 4-1 5 2 8 2 4-1 4-1V3s-1 1-4 1-5-2-8-2-4 1-4 1z"></path>
                                <line x1="4" y1="22" x2="4" y2="15"></line>
                            </svg>
                            <h3>Domain Fit</h3>
                        </div>
                        <div class="card-content" id="domainContent">
                            <p class="loading">Loading...</p>
                        </div>
                    </div>

                    <div class="card">
                        <div class="card-header">
                            <svg class="card-icon" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor">
                                <path d="M17 21v-2a4 4 0 0 0-4-4H5a4 4 0 0 0-4 4v2"></path>
                                <circle cx="9" cy="7" r="4"></circle>
                                <path d="M23 21v-2a4 4 0 0 0-3-3.87"></path>
                                <path d="M16 3.13a4 4 0 0 1 0 7.75"></path>
                            </svg>
                            <h3>Synergy Opportunities</h3>
                        </div>
                        <div class="card-content" id="synergyContent">
                            <p class="loading">Loading...</p>
                        </div>
                    </div>
                </div>
            </div>

            <div class="plans-list" id="plansList" style="display: none;">
                <div class="plans-header">
                    <h2>Generated Account Plans</h2>
                    <button class="btn-secondary" id="backToDashboard">Back to Dashboard</button>
                </div>
                <div class="plans-grid" id="plansGrid">
                </div>
            </div>
            
            <footer class="dashboard-footer">
                <p>Submitted By <strong>Pancham Agarwal</strong> (pancham1603@gmail.com) for Internship Hiring Assignment Round</p>
            </footer>
        </main>
    </div>

    <script src="{{ url_for('static', filename='js/app.js') }}"></script>
</body>
</html>
